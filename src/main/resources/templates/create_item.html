<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <title>Add items</title>
    </head>
    <body>
        <div class="container">
        <h1>Добавление нового продукта</h1>
        <div id="data-container">
            <form id="creationForm">
                <input name="name" type="text" placeholder="название" /><br />
                <input name="calories" type="number" placeholder="калорийность" /><br />
                <input name="carbs" type="number" placeholder="углеводы" /><br />
                <input name="protein" type="number" placeholder="белки" /><br />
                <input name="fats" type="number" placeholder="жиры" /><br />
                <input type="submit" /><br />
            </form>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            let isLoading = false;
            const creationForm = $('#creationForm');
            creationForm.submit(function(e) {
                e.preventDefault();

                let data = creationForm.serializeArray().reduce(function(obj, item) {
                    if (item.name == "name") {
                        obj[item.name] = item.value;
                    } else {
                        obj[item.name] = Number(item.value)
                    }
                    return obj;
                }, {});
                console.log(data);
                $.ajax({
                    url: '/item/create',
                    contentType: "application/json",
                    type: 'Post',
                    data: JSON.stringify(data),
                    success: function(response) {
                        alert('Данные добавлены!');
                    },
                    error: function(xhr, status, error) {
                        console.error('Ошибка загрузки:', error);
                        alert('Произошла ошибка');
                    }
                });
            })
        });
    </script>
    </body>
</html>